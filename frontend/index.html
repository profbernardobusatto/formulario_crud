<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h2>Cadastro</h2>

    <form>
        <label for="nome">Nome:<input type="text" id="nome"></label>
        <label for="email">Email: <input type="email" id="email"></label>
        <label for="senha">Senha: <input type="password" id="senha"></label>
        <label for="confirma-senha">Confirmar Senha: 
            <input type="password" id="confirma-senha"></label>
        <button type="button" class="btn-cadastrar" onclick="enviar()">Cadastrar</button>
    </form>


    <script>
        function enviar(){
            let inputNome = document.getElementById('nome').value
            let inputEmail = document.getElementById('email').value
            let inputSenha = document.getElementById('senha').value
            let inputConfirmaSenha = document.getElementById('confirma-senha').value

            if(!inputNome || !inputEmail || !inputSenha){
                alert("Preencha os campos corretamente")
                return
            }

            if(inputSenha !== inputConfirmaSenha){
                alert("As senhas não conferem")
                return
            }

            fetch("http://localhost:3000/usuarios", {
                method: "POST",
                headers: {"Content-type": "application/json"},
                body: JSON.stringify({
                    nome: inputNome,
                    email: inputEmail,
                    senha: inputSenha
                })
            })
            .then(response => response.json())
            .then(function (data) {
                console.log(data);
                alert(`Usuário com ID: ${data.id} cadastrado`)

                // redireciona para pagina de usuarios
                window.location.href = "usuarios.html";
            })

        }
    </script>
</body>
</html>